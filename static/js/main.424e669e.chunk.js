(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{26:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},35:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(19),o=n.n(r),s=(n(26),n(3)),i=n.n(s),u=n(5),l=n(4),d=(n(28),n(29),n(0)),b=function(e){var t=e.disabled,n=e.onClick;return Object(d.jsx)("button",{disabled:t,className:"btn-animate",onClick:n,children:"Search"})},p=(n(31),[{id:"mp4",name:"mp4",isChecked:!0},{id:"mp3",name:"mp3"},{id:"mov",name:"mov"},{id:"flv",name:"flv"}]),h=function(e){var t=e.downloadFormat,n=e.setDownloadFormat;return Object(d.jsx)("ul",{className:"format-list",children:p.map((function(e){return Object(d.jsxs)("li",{children:[Object(d.jsx)("input",{type:"radio",id:e.id,name:"format",checked:t===e.id,value:e.name,onChange:function(e){return n(e.target.value)}}),Object(d.jsx)("label",{htmlFor:e.id,className:"radio-label",children:e.name})]},e.id)}))})},j=(n(32),function(e){var t=e.inputText,n=e.setInputText,c=Object(a.useState)(!1),r=Object(l.a)(c,2),o=r[0],s=r[1];return Object(d.jsx)("div",{className:"input-container ".concat(o?"animate":""),children:Object(d.jsx)("input",{type:"text",name:"input",id:"text",placeholder:"Search or paste url",spellCheck:!1,autoComplete:"off",onBlur:function(){return s(!1)},onFocus:function(){return s(!0)},value:t,onChange:function(e){return n(e.target.value)},autoFocus:!0})})}),m=n(21),f=n.n(m),v=(n(35),function(e){var t=e.author,n=e.title,a=e.videoId,c=(e.description,e.thumbnailUrl),r=e.handleDownload;return Object(d.jsxs)("div",{className:"card",children:[Object(d.jsxs)("a",{href:"https://youtube.com/watch?v=".concat(a),rel:"noopener noreferrer",target:"_blank",children:[Object(d.jsx)("div",{className:"image",style:{backgroundImage:"url(".concat(c,")")}}),Object(d.jsx)("div",{className:"title",children:t+" - "+f.a.decode(n)})]}),Object(d.jsx)("button",{onClick:function(){return r(a)},className:"download",children:"Download"})]})}),x=c.a.memo(v),O=n(9),w=n.n(O),g="https://shirokatake-ytdl-backend.herokuapp.com",k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mp4";return"".concat(g,"/download?v=").concat(e,"&format=").concat(t)},S=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},y=function(e){return new Promise((function(t,n){var a=0,c=setInterval((function(){a>9?(clearInterval(c),n(new Error("Maximum number of attempts exceeded"))):e.readyState===e.OPEN&&(clearInterval(c),t()),a++}),200)}))},N=function(e){var t=e.match(/[a-zA-Z0-9]{8}-[a-zA-Z0-9]{4}/g);return t?t[0]:null},F=function(e){return(e/1024/1024).toFixed(2)},C=w.a.create({baseURL:g,responseType:"json"}),I=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.get("/suggestions?search=".concat(t));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.get("/metainfo?url=".concat(t));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(u.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w()({url:t,method:"POST",responseType:"blob",data:{uid:n}}).then((function(e){var t,n=(t=e.headers["content-disposition"],/.*filename=['"]?([^"]+)/g.exec(t)[1]),a=window.URL.createObjectURL(new Blob([e.data])),c=document.createElement("a");c.href=a,c.setAttribute("download",n),document.body.appendChild(c),c.click(),c.remove()}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),E=n(57),B=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)("mp4"),o=Object(l.a)(r,2),s=o[0],p=o[1],m=Object(a.useState)([]),f=Object(l.a)(m,2),v=f[0],O=f[1],w=Object(a.useState)(null),C=Object(l.a)(w,2),B=C[0],L=C[1],P=Object(a.useState)(0),R=Object(l.a)(P,2),U=R[0],J=R[1],M=Object(a.useState)(!0),A=Object(l.a)(M,2),z=A[0],Z=A[1],q=Object(a.useState)(0),H=Object(l.a)(q,2),W=H[0],$=H[1],_=Object(a.useState)(1),G=Object(l.a)(_,2),K=G[0],Q=G[1],V=function(){var e=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(n);case 3:t=e.sent,a=t.data,t.success&&(O(a),L(void 0)),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,c,r,o,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z(!1),a=t||n){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,T(a);case 6:if(c=e.sent,r=c.data,!c.success){e.next=32;break}if(o=k(a,s),u=new WebSocket("".concat(g.replace(/^https?/i,"wss"))),l="",u.addEventListener("message",(function(e){if(N(e.data)&&(l=N(e.data)),S(e.data)){var t=JSON.parse(e.data);J(t.downloaded/t.total*100),$(t.downloaded),Q(t.total)}})),u.readyState===u.OPEN){e.next=26;break}return e.prev=15,e.next=18,y(u);case 18:u.send(l),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(15),console.error(e.t0);case 24:e.next=27;break;case 26:u.send(l);case 27:return L(r.videoDetails),console.log("Starting download . . ."),e.next=31,D(o,l);case 31:setTimeout((function(){Z(!0),J(0)}),4e3);case 32:case"end":return e.stop()}}),e,null,[[15,21]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("section",{className:"search-section",children:[Object(d.jsx)(j,{inputText:n,setInputText:c}),Object(d.jsx)(E.a,{hidden:z,striped:!0,variant:"success",now:U,label:"".concat(100!==U?"Fetching . . .":"Ready! "," ").concat(F(W),"MB /").concat(F(K),"MB"),style:{width:"85%",height:"30px",lineHeight:"30px"}}),Object(d.jsx)(h,{downloadFormat:s,setDownloadFormat:p}),Object(d.jsx)(b,{disabled:!z,onClick:function(){var e;e=n,new RegExp(/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.?be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((?:\w|-){11})(?:&\S*)?(?:\?\S*)?$/).test(e)?X(n):V()}})]}),B&&Object(d.jsx)("section",{className:"downloading-section",children:Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:B.title}),Object(d.jsx)("br",{}),Object(d.jsx)("img",{src:"https://i.ytimg.com/vi/".concat(B.videoId,"/hqdefault.jpg"),alt:B.title})]})}),Object(d.jsxs)("section",{className:"suggestions-section",children:[!!v.length&&Object(d.jsx)("h1",{children:"Suggestions"}),Object(d.jsx)("div",{className:"grid",children:v.map((function(e){return Object(d.jsx)(x,{author:e.author.name,title:e.title,videoId:e.id,thumbnailUrl:e.bestThumbnail.url,handleDownload:function(){return X(e.id)}},e.id)}))})]})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,58)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(B,{})}),document.getElementById("root")),L()}},[[55,1,2]]]);
//# sourceMappingURL=main.424e669e.chunk.js.map