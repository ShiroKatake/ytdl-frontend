(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{29:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(22),s=n.n(r),o=(n(29),n(2)),i=n.n(o),u=n(6),l=n(3),d=(n(31),n(24)),j=(n(32),n(0)),b=function(e){var t=e.main,n=e.children,c=e.isLoading,a=e.onClick;return Object(j.jsxs)("button",{disabled:c,className:"btn-animate ".concat(t?"main":""," ").concat(c?"loading":""),onClick:a,children:[Object(j.jsx)("span",{children:n||Object(j.jsx)(d.a,{})}),Object(j.jsx)("div",{className:"spinner"})]})},h=n(8),p=n.n(h),f=(n(36),function(e){var t=e.suggestions,n=e.isLoading,c=e.download;return Object(j.jsx)("div",{className:"grid",children:t.map((function(e){return Object(j.jsxs)("div",{className:"card",children:[Object(j.jsxs)("a",{href:"https://youtube.com/watch?v=".concat(e.id),rel:"noopener noreferrer",target:"_blank",children:[Object(j.jsx)("div",{className:"image",style:{backgroundImage:"url(".concat(e.bestThumbnail.url,")")}}),Object(j.jsx)("div",{className:"title",children:e.author.name+" - "+p.a.decode(e.title)})]}),Object(j.jsx)(b,{isLoading:n,onClick:function(){return c(e.id)},children:"Download"})]},e.id)}))})}),x=(n(37),[{id:"mp4",name:"mp4"},{id:"mp3",name:"mp3"}]),O=function(e){var t=e.downloadFormat,n=e.setDownloadFormat;return Object(j.jsx)("ul",{className:"format-list",children:x.map((function(e){return Object(j.jsxs)("li",{children:[Object(j.jsx)("input",{type:"radio",id:e.id,name:"format",checked:t===e.id,value:e.id,onChange:function(e){return n(e.target.value)}}),Object(j.jsx)("label",{htmlFor:e.id,className:"radio-label",children:e.name})]},e.id)}))})},m=(n(38),function(e){var t=e.inputText,n=e.setInputText,a=Object(c.useState)(!1),r=Object(l.a)(a,2),s=r[0],o=r[1];return Object(j.jsx)("div",{className:"input-container ".concat(s?"animate":""),children:Object(j.jsx)("input",{type:"text",name:"input",id:"text",placeholder:"Search or paste url",spellCheck:!1,autoComplete:"off",onBlur:function(){return o(!1)},onFocus:function(){return o(!0)},value:t,onChange:function(e){return n(e.target.value)},autoFocus:!0})})}),v=(n(39),n(5)),g=(n(40),function(e){var t=e.playlist,n=e.isLoading,a=e.download,r={},s={},o=Object(c.useState)(!1),i=Object(l.a)(o,2),u=i[0],d=i[1],h=Object(c.useState)(r),f=Object(l.a)(h,2),x=f[0],O=f[1];return Object(c.useEffect)((function(){var e=!0;for(var t in x)if(x[t]!==e){e=!1;break}d(e),console.log(x)}),[x]),Object(j.jsxs)("div",{className:"playlist",children:[Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{scope:"col",children:"#"}),Object(j.jsx)("th",{scope:"col",children:"Thumbnail"}),Object(j.jsx)("th",{scope:"col",children:"Title"}),Object(j.jsx)("th",{scope:"col",children:"Download"}),Object(j.jsx)("th",{scope:"col",children:Object(j.jsxs)("div",{children:[Object(j.jsx)("input",{type:"checkbox",checked:u,id:"selectAll",onChange:function(){return d(e=!u),void O((function(t){for(var n in t)t[n]=e;return t}));var e}}),Object(j.jsx)("label",{className:"checkbox-label",children:" Select"})]})})]})}),Object(j.jsx)("tbody",{children:t.map((function(e,t){return r[t]=!1,s[t]=e.id,Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:Object(j.jsx)("img",{width:"100",src:e.bestThumbnail.url,alt:e.title})}),Object(j.jsx)("td",{children:p.a.decode(e.title)}),Object(j.jsx)("td",{children:Object(j.jsx)(b,{isLoading:n,onClick:function(){return a(e.id)}})}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{type:"checkbox",checked:x[t],onChange:function(){!function(e){O((function(t){var n=Object(v.a)({},t);return n[e]=!t[e],n})),console.log(s)}(t)}})})]},e.id)}))})]}),Object(j.jsx)("div",{className:"download-selected-btn",children:Object(j.jsx)(b,{isLoading:n,onClick:function(){return a("video.id")},children:"Download Selected"})})]})}),w=n(12),k=n.n(w),y="localhost"===window.location.hostname?"http://localhost:4000":"https://shirokatake-ytdl-backend.herokuapp.com",S="localhost"===window.location.hostname?"ws":"wss",N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mp4";return"".concat(y,"/download?v=").concat(e,"&format=").concat(t)},C=function(e){var t,n=new RegExp(/^(?:https?:\/\/)?(?:music\.|www\.)?(?:youtu\.?be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((?:\w|-){11})(?:&\S*)?(?:\?\S*)?$/);return null===(t=e.match(n))||void 0===t?void 0:t[1]},L=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},F=function(e){return new Promise((function(t,n){var c=0,a=setInterval((function(){c>9?(clearInterval(a),n(new Error("Maximum number of attempts exceeded"))):e.readyState===e.OPEN&&(clearInterval(a),t()),c++}),200)}))},T=function(e){var t=e.match(/[a-zA-Z0-9]{8}-[a-zA-Z0-9]{4}/g);return t?t[0]:null},I=function(e,t,n){var c="Fetching . . . ".concat(E(t),"MB / ");return e>75&&(c="Preparing download . . . "),100===e&&(c="Ready! "),c+"".concat(E(n),"MB")},E=function(e){return(e/1024/1024).toFixed(2)},D=k.a.create({baseURL:y,responseType:"json"}),P=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.get("/suggestions?search=".concat(t));case 3:return n=e.sent,c=n.data,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.get("/metainfo?url=".concat(t));case 3:return n=e.sent,c=n.data,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.get("/playlist?pl=".concat(t));case 3:return n=e.sent,c=n.data,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(i.a.mark((function e(t,n,c,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k()({url:t,method:"POST",responseType:"blob",data:{uid:n},onDownloadProgress:function(e){var t=75+.25*Math.round(100*e.loaded/e.total);c(t)}}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download",a),document.body.appendChild(n),n.click(),n.remove()}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n,c,a){return e.apply(this,arguments)}}(),M=n(62),J=function(){var e,t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(localStorage.getItem("format")?localStorage.getItem("format"):"mp4"),o=Object(l.a)(s,2),d=o[0],h=o[1],p=Object(c.useState)([]),x=Object(l.a)(p,2),v=x[0],w=x[1],k=Object(c.useState)(null),E=Object(l.a)(k,2),D=E[0],J=E[1],z=Object(c.useState)([]),U=Object(l.a)(z,2),Z=U[0],$=U[1],_=Object(c.useState)(!1),q=Object(l.a)(_,2),H=q[0],W=q[1],G=Object(c.useState)(0),K=Object(l.a)(G,2),Q=K[0],V=K[1],X=Object(c.useState)(!0),Y=Object(l.a)(X,2),ee=Y[0],te=Y[1],ne=Object(c.useState)(0),ce=Object(l.a)(ne,2),ae=ce[0],re=ce[1],se=Object(c.useState)(1),oe=Object(l.a)(se,2),ie=oe[0],ue=oe[1];Object(c.useEffect)((function(){localStorage.setItem("format",d)}),[d]);var le=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W(!0),!(t=C(a))){e.next=7;break}return e.next=5,be(t);case 5:e.next=14;break;case 7:if(n=a,!new RegExp(/^https?:\/\/(?:music\.|www\.)?(?:youtu\.?be\/|youtube\.com\/)playlist\?list=([a-zA-Z0-9\-_]{34})$/).test(n)){e.next=12;break}return e.next=10,je();case 10:e.next=14;break;case 12:return e.next=14,de();case 14:W(!1);case 15:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(a);case 3:t=e.sent,n=t.data,t.success&&(w(n),$([]),J(void 0)),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R(a);case 3:t=e.sent,n=t.data,t.success&&($(n),w([]),J(void 0)),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,c,r,s,o,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W(!0),te(!1),n=t||a){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,B(n);case 7:if(c=e.sent,r=c.data,!c.success){e.next=35;break}if(s=N(n,d),o=new WebSocket("".concat(y.replace(/^https?/i,S))),u="",o.addEventListener("message",(function(e){if(T(e.data)&&(u=T(e.data)),L(e.data)){var t=JSON.parse(e.data);V(t.downloaded/t.total*75),re(t.downloaded),ue(t.total)}})),o.readyState===o.OPEN){e.next=27;break}return e.prev=16,e.next=19,F(o);case 19:o.send(u),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(16),console.error(e.t0);case 25:e.next=28;break;case 27:o.send(u);case 28:return J(r.videoDetails),l="".concat(r.videoDetails.title,".").concat(d),console.log("Starting download . . ."),e.next=33,A(s,u,V,l);case 33:W(!1),setTimeout((function(){te(!0),V(0)}),5e3);case 35:case"end":return e.stop()}}),e,null,[[16,22]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("section",{className:"search-section",children:[Object(j.jsx)(m,{inputText:a,setInputText:r}),Object(j.jsx)(M.a,{hidden:ee,striped:!0,variant:"success",now:Q,label:I(Q,ae,ie),style:{width:"100%",height:"30px",lineHeight:"30px"}}),Object(j.jsx)(O,{downloadFormat:d,setDownloadFormat:h}),Object(j.jsx)(b,{main:!0,isLoading:H,onClick:le,children:"Search"})]}),D&&Object(j.jsx)("section",{className:"downloading-section",children:Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:D.title}),Object(j.jsx)("br",{}),Object(j.jsx)("img",{src:"https://i.ytimg.com/vi/".concat(D.videoId,"/hqdefault.jpg"),alt:D.title})]})}),v.length>0&&Object(j.jsxs)("section",{className:"suggestions-section",children:[Object(j.jsx)("h1",{children:"Suggestions"}),Object(j.jsx)(f,{suggestions:v,isLoading:H,download:be})]}),(null===(e=Z.items)||void 0===e?void 0:e.length)>0&&Object(j.jsxs)("section",{className:"playlist-section",children:[Object(j.jsx)("h1",{children:Z.author.name+" - "+Z.title}),Object(j.jsx)(g,{playlist:Z.items,isLoading:H,download:be})]})]})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,63)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(J,{})}),document.getElementById("root")),z()}},[[60,1,2]]]);
//# sourceMappingURL=main.fabf3d2a.chunk.js.map