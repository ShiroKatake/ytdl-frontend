(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{26:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(19),s=n.n(r),o=(n(26),n(2)),i=n.n(o),u=n(5),l=n(4),d=(n(28),n(29),n(0)),p=function(e){var t=e.main,n=e.children,a=e.isLoading,c=e.onClick;return Object(d.jsxs)("button",{disabled:a,className:"btn-animate ".concat(t?"main":""," ").concat(a?"loading":""),onClick:c,children:[Object(d.jsx)("p",{children:n}),Object(d.jsx)("div",{className:"spinner"})]})},b=n(21),j=n.n(b),h=(n(33),function(e){var t=e.suggestions,n=e.isLoading,a=e.download;return Object(d.jsx)("div",{className:"grid",children:t.map((function(e){return Object(d.jsxs)("div",{className:"card",children:[Object(d.jsxs)("a",{href:"https://youtube.com/watch?v=".concat(e.id),rel:"noopener noreferrer",target:"_blank",children:[Object(d.jsx)("div",{className:"image",style:{backgroundImage:"url(".concat(e.bestThumbnail.url,")")}}),Object(d.jsx)("div",{className:"title",children:e.author.name+" - "+j.a.decode(e.title)})]}),Object(d.jsx)(p,{isLoading:n,onClick:function(){return a(e.id)},children:"Download"})]},e.id)}))})}),f=(n(34),[{id:"mp4",name:"mp4"},{id:"mp3",name:"mp3"}]),m=function(e){var t=e.downloadFormat,n=e.setDownloadFormat;return Object(d.jsx)("ul",{className:"format-list",children:f.map((function(e){return Object(d.jsxs)("li",{children:[Object(d.jsx)("input",{type:"radio",id:e.id,name:"format",checked:t===e.id,value:e.id,onChange:function(e){return n(e.target.value)}}),Object(d.jsx)("label",{htmlFor:e.id,className:"radio-label",children:e.name})]},e.id)}))})},v=(n(35),function(e){var t=e.inputText,n=e.setInputText,c=Object(a.useState)(!1),r=Object(l.a)(c,2),s=r[0],o=r[1];return Object(d.jsx)("div",{className:"input-container ".concat(s?"animate":""),children:Object(d.jsx)("input",{type:"text",name:"input",id:"text",placeholder:"Search or paste url",spellCheck:!1,autoComplete:"off",onBlur:function(){return o(!1)},onFocus:function(){return o(!0)},value:t,onChange:function(e){return n(e.target.value)},autoFocus:!0})})}),x=(n(36),n(9)),O=n.n(x),g="localhost"===window.location.hostname?"http://localhost:4000":"https://shirokatake-ytdl-backend.herokuapp.com",w="localhost"===window.location.hostname?"ws":"wss",k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mp4";return"".concat(g,"/download?v=").concat(e,"&format=").concat(t)},y=function(e){return new RegExp(/^https?:\/\/(?:music\.|www\.)?(?:youtu\.?be\/|youtube\.com\/)playlist\?list=([a-zA-Z0-9\-_]{34})$/).test(e)},S=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},N=function(e){return new Promise((function(t,n){var a=0,c=setInterval((function(){a>9?(clearInterval(c),n(new Error("Maximum number of attempts exceeded"))):e.readyState===e.OPEN&&(clearInterval(c),t()),a++}),200)}))},F=function(e){var t=e.match(/[a-zA-Z0-9]{8}-[a-zA-Z0-9]{4}/g);return t?t[0]:null},C=function(e){return(e/1024/1024).toFixed(2)},I=O.a.create({baseURL:g,responseType:"json"}),L=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.get("/suggestions?search=".concat(t));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.get("/metainfo?url=".concat(t));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.get("/playlist?pl=".concat(t));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(i.a.mark((function e(t,n,a,c){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O()({url:t,method:"POST",responseType:"blob",data:{uid:n},onDownloadProgress:function(e){var t=75+.25*Math.round(100*e.loaded/e.total);a(t)}}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download",c),document.body.appendChild(n),n.click(),n.remove()}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n,a,c){return e.apply(this,arguments)}}(),D=n(58),B=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(localStorage.getItem("format")?localStorage.getItem("format"):"mp4"),s=Object(l.a)(r,2),o=s[0],b=s[1],j=Object(a.useState)([]),f=Object(l.a)(j,2),x=f[0],O=f[1],I=Object(a.useState)([]),B=Object(l.a)(I,2),R=B[0],M=B[1],A=Object(a.useState)(null),J=Object(l.a)(A,2),z=J[0],U=J[1],Z=Object(a.useState)(!1),$=Object(l.a)(Z,2),_=$[0],q=$[1],H=Object(a.useState)(0),W=Object(l.a)(H,2),G=W[0],K=W[1],Q=Object(a.useState)(!0),V=Object(l.a)(Q,2),X=V[0],Y=V[1],ee=Object(a.useState)(0),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ce=Object(a.useState)(1),re=Object(l.a)(ce,2),se=re[0],oe=re[1];Object(a.useEffect)((function(){localStorage.setItem("format",o)}),[o]);var ie=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q(!0),t=n,!new RegExp(/^(?:https?:\/\/)?(?:music\.|www\.)?(?:youtu\.?be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((?:\w|-){11})(?:&\S*)?(?:\?\S*)?$/).test(t)){e.next=6;break}return e.next=4,de(n);case 4:e.next=12;break;case 6:if(!y(n)){e.next=10;break}le(),e.next=12;break;case 10:return e.next=12,ue();case 12:q(!1);case 13:case"end":return e.stop()}var t}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L(n);case 3:t=e.sent,a=t.data,t.success&&(O(a),M([]),U(void 0)),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(n);case 3:t=e.sent,a=t.data,t.success&&(M(a.items),O([]),U(void 0)),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,c,r,s,u,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q(!0),Y(!1),a=t||n){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,T(a);case 7:if(c=e.sent,r=c.data,!c.success){e.next=35;break}if(s=k(a,o),u=new WebSocket("".concat(g.replace(/^https?/i,w))),l="",u.addEventListener("message",(function(e){if(F(e.data)&&(l=F(e.data)),S(e.data)){var t=JSON.parse(e.data);K(t.downloaded/t.total*75),ae(t.downloaded),oe(t.total)}})),u.readyState===u.OPEN){e.next=27;break}return e.prev=16,e.next=19,N(u);case 19:u.send(l),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(16),console.error(e.t0);case 25:e.next=28;break;case 27:u.send(l);case 28:return U(r.videoDetails),d="".concat(r.videoDetails.title,".").concat(o),console.log("Starting download . . ."),e.next=33,P(s,l,K,d);case 33:q(!1),setTimeout((function(){Y(!0),K(0)}),5e3);case 35:case"end":return e.stop()}}),e,null,[[16,22]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("section",{className:"search-section",children:[Object(d.jsx)(v,{inputText:n,setInputText:c}),Object(d.jsx)(D.a,{hidden:X,striped:!0,variant:"success",now:G,label:function(e){var t="Fetching . . . ".concat(C(ne),"MB / ");return e>75&&(t="Preparing download . . . "),100===e&&(t="Ready! "),t+"".concat(C(se),"MB")}(G),style:{width:"100%",height:"30px",lineHeight:"30px"}}),Object(d.jsx)(m,{downloadFormat:o,setDownloadFormat:b}),Object(d.jsx)(p,{main:!0,isLoading:_,onClick:ie,children:"Search"})]}),z&&Object(d.jsx)("section",{className:"downloading-section",children:Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:z.title}),Object(d.jsx)("br",{}),Object(d.jsx)("img",{src:"https://i.ytimg.com/vi/".concat(z.videoId,"/hqdefault.jpg"),alt:z.title})]})}),Object(d.jsxs)("section",{className:"suggestions-section",children:[!!x.length&&Object(d.jsx)("h1",{children:"Suggestions"}),Object(d.jsx)(h,{suggestions:x,isLoading:_,download:de})]}),Object(d.jsxs)("section",{className:"playlist-section",children:[!!R.length&&Object(d.jsx)("h1",{children:"Suggestions"}),Object(d.jsx)(h,{suggestions:R,isLoading:_,download:de})]})]})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(B,{})}),document.getElementById("root")),R()}},[[56,1,2]]]);
//# sourceMappingURL=main.91f81420.chunk.js.map